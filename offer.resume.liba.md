---
id: 9il4oi977srfg09ktemag79
title: Liba
desc: ''
updated: 1767433347442
created: 1765609273081
---

## 篱笆墙工作经历描述

1. 职位：嵌入式软件工程师
2. 时间：2025年2月-2025年12月
3. 工作内容：负责公司智能印章机和智能儿童陪伴产品的研发，跨平台封装，代码重构，以及售后问题的排查处理
4. 需要整理的信息点：
5. 智能印章机项目功能点和技术栈的梳理：
   1. 用户通过：，设备端通过xx与xx进行xxx，哪些
   2. 软件抽象模块：上位机模块，ota镜像升级，固件升级模块，媒体拍照录像模块，4g模块，wifi模块，网络切管理模块，协议管理模块（支持 串口，蓝牙，网络socket），信号管理模块
   3. 集成硬件模块：指纹，蓝牙，wifi，4g，相机，电机控制，屏幕
   4. QT（信号和槽，基础组件的使用），c++11，linux应用开发，进程间通信，rpc调用，网络协议开发（mqtt，http），物联网（串口，蓝牙，陀螺仪，指纹，4g，wifi），音视频，相机模块开发
   5. 项目代码函数总量：2-3万行
   6. 个人总结：困难点：设备端对接的平台类型多（包括硬件平台（有专用的高拍仪，以及移动手机端）以及软件平台（安卓，苹果，小程序，企微）），需进行协议兼容，以及旧版固件功能兼容；涉及模块较多，需要管理同类型模块功能在不同情形下的切换
   7. 具有挑战性的工作内容：移植bluez蓝牙协议栈到当前低成本芯片方案中
   8. 对比其他平台方案，如安卓+app，性能和资源占用较大优势.
6. 弱项：当前接触项目的ui并不复杂，所以ui设计这方面的经验较少

## gpt修改版本

1. 工作内容和成果
   1. 产品说明：手持式智能印章终端，集成电机控制、指纹认证、音视频取证与多协议通信能力，通过 MQTT（wifi/4G） / 蓝牙BLE / 串口等方式与手机App及印控设备协同完成盖印流程
   2. 负责公司智能印章终端产品的研发，平台迁移以及跨平台封装，业务逻辑以及核心模块的开发。
   3. 负责存量产品维护以及售后问题排查。（多历史版本，多平台的代码维护）。
   4. 参与现存产品的代码重构，负责核心模块的重构和接口抽象，与组内成员协作完成模块模块拆分，以及分工实现。
   5. 独立负责公司成本轻量化/面向量产的智能印章产线 应用程序的开发，保持业务功能一致的前提下，将核心平台rv1126迁移到rv1106（uclibc），适配不同的外设和软件模块。
      1. 从零完成交叉编译开发环境的搭建，以及设备端相关依赖环境的移植，针对不同的平台整合对应的开发环境docker镜像和操作文档，共享于组内成员。
      2. 重点负责并实现以下核心模块：
         1. 蓝牙模块 BLE: 由于rv1106厂商并不提供蓝牙和wifi的sdk，而rv1106的编译器uclic无法支持完整的linux bluez服务功能，需要基于开源项目bluez，对低功耗蓝牙相关源码进行裁剪和移植，封装统一的多线程调用接口版本和进程rpc调用接口版本；解决在多线程环境下 基于官方底层att gatt接口调用时，会出现的epoll fd异常问题，基于demo实验和源码分析完成稳定性优化，保证在一百万条消息收发的压力测试下长期稳定运行。
         2. wifi模块：基于wpa_supplicant 重构wifi管理模块，需完整实现 瑞芯微sdk中管理接口的语义和回调模型，确保上层业务wifi管理逻辑在不同平台间的通用性和复用性。
         3. 音视频模块：封装独立的拍照，录像，取流，预览接口，并封装为进程间调用，支撑业务取证与流程追溯需求。
         4. 负责不同通信方式的统一接口封装，协议切换，和不同软硬件版本下的协议管理，统一管理 串口，蓝牙BLE，网络（主要mqtt，http）多种通信方式，支撑与手机app以及印控设备的业务交互。
         5. 负责整体信号转发模块的设计和实现，由于涉及qt框架的信号槽机制，在此基础上封装了一个简单的信号管理模块，系统下所有模块通过该管理模块进行信号的导出和发送，进行模块间引用的解耦。
         6. 网络管理模块：对wifi和4g进行一个上下电，在不同网络情况下以及用户手动配置时进行网络路由切换管理。
         7. ota镜像升级以及固件升级和上位机通信模块的实现。
         8. 项目整体代码规模约2-3万行，个人负责底层模块和业务模块1.5万行左右，包含通信，多媒体，网络等相关功能。
2. 技术栈
   1. C++11、Qt（信号与槽、基础组件）
   2. 网络与协议：MQTT、HTTP、Socket
   3. 物联网与外设：串口、BLE、WiFi、4G、指纹模块、陀螺仪
   4. 多媒体：音视频处理、摄像头采集与录制
   5. 嵌入式平台：rockchip rv1126/rv1106

## 改进 1.1

1. 涉及技术栈
   1. 平台：linux，rockchip rv1126/rv1106
   2. c++11，Qt，linux多线程/多进程编程(线程安全组件，线程同步异步编程，进程间通信，本地rpc调用，常规文件锁，信号量等)，网络编程（mqtt，http，websocket，epoll IO复用等），物联网与外设（串口，蓝牙BLE，WiFi，4G，指纹模块，陀螺仪），音视频多媒体（摄像头采集录制编码，视频渲染）
2. 工作内容和责任描述
   1. 产品说明：一款手持式智能印章管理终端，服务于企事业单位，集成电机控制、指纹认证、音视频取证与多协议通信能力，通过4g/wifi（mqtt，http）蓝牙（BLE） 以及串口等多种通讯方式与手机app以及专用的印控设备协同完成 印章管理和盖印流程
   2. 支撑存量产品的维护和售后问题的排查
   3. 参与现存产品的代码重构，负责核心模块的接口抽象和重构，与组内成员完成模块拆分，以及分工实现
   4. 负责公司成本轻量化/面向量产的智能印章机产线 应用程序的开发，确保业务功能一致的前提下，将核心平台从rv1126迁移到rv1106，并适配不同外设和软件模块
      1. 搭建对应交叉编译开发环境，以及移植设备端所有相关依赖，针对不同平台整合对应的开发环境docker镜像和开发容器（dev container），编写说明文档，共享于组内成员
      2. 相关核心模块:
         1. 蓝牙模块 BLE：由于rv1106厂商sdk包并不提供蓝牙和wifi相关应用层接口，rv1106编译器uclibc无法支持完整的linux bluez蓝牙服务，需要基于bluez源码，对低功耗蓝牙功能部分进行裁剪修改，封装自用的线程调用版本和进程rpc调用的接口版本；解决在多线程环境下，bluez底层att gatt接口调用时，出现的epoll fd error导致蓝牙连接异常，基于设计demo实验和源码分析完成稳定性优化，确保了设备间通过低功耗蓝牙协议在单条连接一百万条消息内的收发稳定。
         2. 网络管理模块：基于wpa_supplicant实现wifi管理模块，封装事件回调，为确保上层业务逻辑代码的通用和复用性，需实现完整且等价的 瑞芯微sdk接口逻辑和回调模型。上层网络管理模块，负责相关外设（4g/wifi）的上下电管理，以及路由切换。
         3. 音视频模块：封装独立的拍照，录像，取流，预览接口，并封装为进程间调用，支撑业务取证与流程追溯需求。
         4. 通信协议管理：统一封装 串口 蓝牙ble 网络（mqtt，http）接口，管理不同软硬件版本以及服务版本下的协议切换，支撑与手机app和专用印控设备的业务交互。
         5. ota镜像升级和固件升级，以及上位机交互模块。
         6. 信号管理模块，在qt框架之下，模块间通过信号管理模块进行信号的导出以及转发，进行模块快间引用的解耦。